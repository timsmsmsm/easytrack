:orphan:

.. _napari_plugin:

Using the ``napari-easytrack`` plugin for ``napari``
============================================

The following steps are part of the typical ``napari-easytrack`` workflow.

1.  Open ``napari`` and load your image data.
2.  Open the ``Tracking`` widget from ``napari-EasyTrack`` plugin from the plugins menu.
3.  Try out the different default presets for tracking by selecting them from the dropdown menu.
4.  Click on ``Apply Tracking`` to run the tracking algorithm with the selected preset.
5.  If the results are not satisfactory, you can try to improve the segmentation with our ``Clean Segmentation`` and ``Remove Small Objects`` buttons.

    5.1. The ``Clean Segmentation`` button keeps the the largest connected component per label on each frame, and reassigns smaller fragments and small labels to closest neighbour identifier (cell).

    5.2. The ``Remove Small Objects`` button removes objects smaller than a specified size threshold.
6.  If None of the presets work well for your data, you can customize the tracking parameters by using our ``Parameter Tuning`` widget.
7.  The ``Parameter tuning`` widget required a ground truth dataset to compare the tracking results against.

    7.1. You can load your own ground truth dataset by selecting it on the ``Ground Truth Layer`` dropdown menu.

    7.2. Select a ``Study Name``. It is autogenerated, but you can customise it.

    7.3. Select the number of ``Trials`` (default is 128, which we think is a good number for most datasets).

    7.4. Select the ``Timeout`` (in seconds, default is 60s). For larger datasets or older computers, you might want to increase this value.

        7.4.1. If the Timeout is reached during a trial, a penalty score will be assigned to that trial. The penalty score is defined by the ``Timeout Penalty`` parameter (default is 10,000).

    7.5 ``Sampler`` is inherited from ``optuna`` library. Default is ``tpe``. Other options is ``random``.

    7.6 You can tick on ``Parallel`` to enable parallel processing (if your computer has multiple cores).

    7.7 ``Output Dir`` is the directory where the temporal tuning rusults will be saved. No need to change this unless you want to save the results in a specific location.

    7.8 You can modify the ``Voxel Size`` if your data is anisotropic (default is 1.0 for all dimensions).

    7.9 Click on ``Start Tuning`` to begin the parameter tuning process. This process can take around 30 minutes depending on your dataset size and computer performance. Also, the score should be below the ``Timeout Penalty`` value.

    7.10 Once the tuning is complete, it can be saved to a JSON file by clicking on the ``Save Config`` button.

8.  You can use this presets file for future tracking tasks by selecting ``Custom Preset`` from the presets dropdown menu.
